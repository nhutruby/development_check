(function(a){var b={controls:{bold:{visible:true,tags:["b","strong"],css:{fontWeight:"bold"},tooltip:"Bold"},copy:{visible:false,tooltip:"Copy"},createLink:{groupIndex:6,visible:true,exec:function(){var d=this.documentSelection.call(a(this.editor));if(d&&d.length>0){if(a.browser.msie){this.focus();this.editorDoc.execCommand("createLink",true,null)}else{var c=prompt("URL","http://");if(c&&c.length>0){this.editorDoc.execCommand("unlink",false,null);this.editorDoc.execCommand("createLink",false,c)}}}else{if(this.options.messages.nonSelection){alert(this.options.messages.nonSelection)}}},tags:["a"],tooltip:"Create link"},cut:{groupIndex:8,visible:false,tooltip:"Cut"},decreaseFontSize:{visible:false&&!(a.browser.msie),tags:["small"],tooltip:"Decrease font size"},h1:{visible:true,groupIndex:7,className:"h1",command:(a.browser.msie||a.browser.safari)?"FormatBlock":"heading","arguments":(a.browser.msie||a.browser.safari)?"<h1>":"h1",tags:["h1"],tooltip:"Header 1"},h2:{visible:true,className:"h2",command:(a.browser.msie||a.browser.safari)?"FormatBlock":"heading","arguments":(a.browser.msie||a.browser.safari)?"<h2>":"h2",tags:["h2"],tooltip:"Header 2"},h3:{visible:true,className:"h3",command:(a.browser.msie||a.browser.safari)?"FormatBlock":"heading","arguments":(a.browser.msie||a.browser.safari)?"<h3>":"h3",tags:["h3"],tooltip:"Header 3"},html:{groupIndex:10,visible:false,exec:function(){if(this.viewHTML){this.setContent(a(this.original).val());a(this.original).hide();a(this.editor).show()}else{var c=a(this.editor);this.saveContent();a(this.original).css({width:a(this.element).outerWidth()-6,height:a(this.element).height()-a(this.panel).height()-6,resize:"none"}).show();c.hide()}this.viewHTML=!(this.viewHTML)},tooltip:"View source code"},increaseFontSize:{groupIndex:9,visible:false&&!(a.browser.msie),tags:["big"],tooltip:"Increase font size"},indent:{groupIndex:2,visible:true,tooltip:"Indent"},insertHorizontalRule:{visible:true,tags:["hr"],tooltip:"Insert Horizontal Rule"},insertImage:{visible:true,exec:function(){var c=this;if(a.modal){a.modal(this.defaults.formImageHtml,{onShow:function(f){a("input:submit",f.data).click(function(k){k.preventDefault();var h=a('input[name="url"]',f.data).val();var l=a('input[name="imagetitle"]',f.data).val();var j=a('input[name="description"]',f.data).val();var g='<img src="'+h+'" title="'+l+'" alt="'+j+'"/>';c.insertHtml(g);a.modal.close()});a("input:reset",f.data).click(function(g){g.preventDefault();a.modal.close()})},maxWidth:this.defaults.formWidth,maxHeight:this.defaults.formHeight,overlayClose:true})}else{if(a.fn.dialog){var d=a(this.defaults.formImageHtml).appendTo("body");d.dialog({modal:true,width:this.defaults.formWidth,height:this.defaults.formHeight,open:function(f,g){a("input:submit",a(this)).click(function(l){l.preventDefault();var j=a('input[name="url"]',d).val();var m=a('input[name="imagetitle"]',d).val();var k=a('input[name="description"]',d).val();var h="<img src='"+j+"' title='"+m+"' alt='"+k+"' />";c.insertHtml(h);a(d).dialog("close")});a("input:reset",a(this)).click(function(h){h.preventDefault();a(d).dialog("close")})},close:function(f,g){a(this).dialog("destroy")}})}else{if(a.browser.msie){this.focus();this.editorDoc.execCommand("insertImage",true,null)}else{var e=prompt("URL","http://");if(e&&e.length>0){this.editorDoc.execCommand("insertImage",false,e)}}}}},tags:["img"],tooltip:"Insert image"},insertOrderedList:{groupIndex:5,visible:true,tags:["ol"],tooltip:"Insert Ordered List"},insertTable:{visible:true,exec:function(){var d=this;if(a.fn.modal){a.modal(this.defaults.formTableHtml,{onShow:function(g){a("input:submit",g.data).click(function(k){k.preventDefault();var h=a('input[name="rowCount"]',g.data).val();var j=a('input[name="colCount"]',g.data).val();d.insertTable(j,h,this.defaults.tableFiller);a.modal.close()});a("input:reset",g.data).click(function(h){h.preventDefault();a.modal.close()})},maxWidth:this.defaults.formWidth,maxHeight:this.defaults.formHeight,overlayClose:true})}else{if(a.fn.dialog){var e=a(this.defaults.formTableHtml).appendTo("body");e.dialog({modal:true,width:this.defaults.formWidth,height:this.defaults.formHeight,open:function(g,h){a("input:submit",a(this)).click(function(l){l.preventDefault();var j=a('input[name="rowCount"]',e).val();var k=a('input[name="colCount"]',e).val();d.insertTable(k,j,this.defaults.tableFiller);a(e).dialog("close")});a("input:reset",a(this)).click(function(j){j.preventDefault();a(e).dialog("close")})},close:function(g,h){a(this).dialog("destroy")}})}else{var f=prompt("Count of columns","3");var c=prompt("Count of rows","3");this.insertTable(f,c,this.defaults.tableFiller)}}},tags:["table"],tooltip:"Insert table"},insertUnorderedList:{visible:true,tags:["ul"],tooltip:"Insert Unordered List"},italic:{visible:true,tags:["i","em"],css:{fontStyle:"italic"},tooltip:"Italic"},justifyCenter:{visible:true,tags:["center"],css:{textAlign:"center"},tooltip:"Justify Center"},justifyFull:{visible:true,css:{textAlign:"justify"},tooltip:"Justify Full"},justifyLeft:{visible:true,groupIndex:1,css:{textAlign:"left"},tooltip:"Justify Left"},justifyRight:{visible:true,css:{textAlign:"right"},tooltip:"Justify Right"},ltr:{visible:false,exec:function(){var c=this.documentSelection();if(a("<div/>").append(c).children().length>0){c=a(c).attr("dir","ltr")}else{c=a("<div/>").attr("dir","ltr").append(c)}this.editorDoc.execCommand("inserthtml",false,a("<div/>").append(c).html())},tooltip:"Left to Right"},outdent:{visible:true,tooltip:"Outdent"},paste:{visible:false,tooltip:"Paste"},redo:{visible:true,tooltip:"Redo"},removeFormat:{visible:true,exec:function(){this.removeFormat()},tooltip:"Remove formatting"},rtl:{visible:false,exec:function(){var c=this.documentSelection();if(a("<div/>").append(c).children().length>0){c=a(c).attr("dir","rtl")}else{c=a("<div/>").attr("dir","rtl").append(c)}this.editorDoc.execCommand("inserthtml",false,a("<div/>").append(c).html())},tooltip:"Right to Left"},strikeThrough:{visible:true,tags:["s","strike"],css:{textDecoration:"line-through"},tooltip:"Strike-through"},subscript:{groupIndex:3,visible:true,tags:["sub"],tooltip:"Subscript"},superscript:{visible:true,tags:["sup"],tooltip:"Superscript"},underline:{visible:true,tags:["u"],css:{textDecoration:"underline"},tooltip:"Underline"},undo:{groupIndex:4,visible:true,tooltip:"Undo"}},defaults:{html:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">STYLE_SHEET</head><body style="margin: 0px;">INITIAL_CONTENT</body></html>',formTableHtml:'<form class="wysiwyg"><fieldset><legend>Insert table</legend><label>Count of columns: <input type="text" name="colCount" value="3" /></label><label><br />Count of rows: <input type="text" name="rowCount" value="3" /></label><input type="submit" class="button" value="Insert table" /> <input type="reset" value="Cancel" /></fieldset></form>',formImageHtml:'<form class="wysiwyg"><fieldset><legend>Insert Image</legend><label>Image URL: <input type="text" name="url" value="http://" /></label><label>Image Title: <input type="text" name="imagetitle" value="" /></label><label>Image Description: <input type="text" name="description" value="" /></label><input type="submit" class="button" value="Insert Image" /> <input type="reset" value="Cancel" /></fieldset></form>',formWidth:440,formHeight:270,debug:false,events:{},controls:{},css:{},autoGrow:false,autoSave:true,brIE:true,iFrameClass:null,initialContent:"<p>Initial content</p>",loadCss:["jquery.wysiwyg.css","jquery.wysiwyg.modal.css"],maxHeight:10000,messages:{nonSelection:"Select the text you wish to link"},resizeOptions:false,rmUnwantedBr:true,tableFiller:"Lorem ipsum"},editor:null,editorDoc:null,element:null,options:{},original:null,rangeSaver:null,timers:[],addHoverClass:function(){a(this).addClass("wysiwyg-button-hover")},appendControls:function(){var d=this.parseControls();var g=0;var c=true;for(var e in d){var f=d[e];if(f.groupIndex&&g!=f.groupIndex){g=f.groupIndex;c=false}if(!f.visible){continue}if(!c){this.appendMenuSeparator();c=true}if(f.custom){this.appendMenuCustom(e,f.options)}else{this.appendMenu(f.command||e,f["arguments"]||"",f.className||f.command||e||"empty",f.exec,f.tooltip||f.command||e||"")}}},appendMenu:function(h,d,f,e,g){var c=this;d=d||[];return a('<li role="menuitem" unselectable="on">'+(f||h)+"</li>").addClass(f||h).attr("title",g).hover(this.addHoverClass,this.removeHoverClass).click(function(){if(e){e.apply(c)}else{c.focus();c.withoutCss();try{c.editorDoc.execCommand(h,false,d)}catch(j){console.error(j)}}if(c.options.autoSave){c.saveContent()}this.blur();c.focusEditor()}).appendTo(this.panel)},appendMenuCustom:function(e,d){var c=this;if("undefined"!==typeof d.callback){a(window).bind("trigger-"+e+".wysiwyg",d.callback)}return a('<li role="menuitem" unselectable="on"><img src="'+d.icon+'" class="jwysiwyg-custom-icon"/>'+e+"</li>").addClass("custom-command-"+e).addClass("wysiwyg-custom-command").addClass(e).attr("title",d.tooltip).hover(this.addHoverClass,this.removeHoverClass).click(function(){if("undefined"!==typeof d.exec){d.exec.apply(c)}else{c.focus();c.withoutCss();try{if("undefined"!==typeof d.command){c.editorDoc.execCommand(d.command,false,args)}}catch(f){console.error(f)}}if(c.options.autoSave){c.saveContent()}this.blur();c.focusEditor()}).appendTo(this.panel)},appendMenuSeparator:function(){return a('<li role="separator" class="separator"></li>').appendTo(this.panel)},checkTargets:function(f){for(var c in this.options.controls){var e=this.options.controls[c];var j=e.className||e.command||c||"empty";a("."+j,this.panel).removeClass("active");if(e.tags||(e.options&&e.options.tags)){var l=e.tags||(e.options&&e.options.tags);var h=f;do{if(h.nodeType!=1){break}if(a.inArray(h.tagName.toLowerCase(),l)!=-1){a("."+j,this.panel).addClass("active")}}while((h=h.parentNode))}if(e.css||(e.options&&e.options.css)){var g=e.css||(e.options&&e.options.css);var d=a(f);do{if(d[0].nodeType!=1){break}for(var k in g){if(d.css(k).toString().toLowerCase()==g[k]){a("."+j,this.panel).addClass("active")}}}while((d=d.parent()))}}},designMode:function(){var d=3;var e;var c=this;var f=this.editorDoc;e=function(){if(c.innerDocument()!==f){c.initFrame();return}try{f.designMode="on"}catch(g){}d--;if(d>0&&a.browser.mozilla){c.timers.designMode=setTimeout(e,100)}};e();this.editorDoc_designMode=true},destroy:function(){for(var d in this.timers){clearTimeout(this.timers[d])}var c=a(this.element).closest("form");c.unbind("submit.wysiwyg",this.autoSaveFunction).unbind("reset.wysiwyg",this.resetFunction);a(this.element).remove();a.removeData(this.original,"wysiwyg");a(this.original).show();return this},documentSelection:function(){if(this.editor.get(0).contentWindow.document.selection){return this.editor.get(0).contentWindow.document.selection.createRange().text}else{return this.editor.get(0).contentWindow.getSelection().toString()}},execute:function(d,c){if(typeof(c)=="undefined"){c=null}this.editorDoc.execCommand(d,false,c)},extendOptions:function(d){var c={};if(d&&d.controls){c=d.controls;delete d.controls}d=a.extend(true,{},this.defaults,d);d.controls=a.extend(true,d.controls,this.controls);for(var e in c){if(e in d.controls){a.extend(d.controls[e],c[e])}else{d.controls[e]=c[e]}}return d},findPath:function(){var f=a("script");var c=/^(.*)jquery\.wysiwyg\.js$/;var e=null;for(i=0;i<f.length;i++){if(null===e){var d=c.exec(f[i].src);if(null!==d){return d[1]}}}return e},focus:function(){this.editor.get(0).contentWindow.focus();return this},focusEditor:function(){if(this.rangeSaver!==null){if(window.getSelection){var c=window.getSelection();if(c.rangeCount>0){c.removeAllRanges()}c.addRange(savedRange)}else{if(document.createRange){window.getSelection().addRange(savedRange)}else{if(document.selection){savedRange.select()}}}}},getContent:function(){return a(this.innerDocument()).find("body").html()},getElementByAttributeValue:function(e,c,f){var h=this.editorDoc.getElementsByTagName(e);for(var d=0;d<h.length;d++){var g=h[d].getAttribute(c);if(a.browser.msie){g=g.substr(g.length-f.length)}if(g==f){return h[d]}}return false},getInternalRange:function(){var c=this.getInternalSelection();if(!c){return null}return(c.rangeCount>0)?c.getRangeAt(0):(c.createRange?c.createRange():null)},getInternalSelection:function(){return(this.editor.get(0).contentWindow.getSelection)?this.editor.get(0).contentWindow.getSelection():this.editor.get(0).contentDocument.selection},getRange:function(){var c=this.getSelection();if(!c){return null}return(c.rangeCount>0)?c.getRangeAt(0):(c.createRange?c.createRange():null)},getSelection:function(){return(window.getSelection)?window.getSelection():document.selection},grow:function(){var f=a(this.innerDocument().body);var e=a.browser.msie?f[0].scrollHeight:f.height()+2+20;var d=this.initialHeight;var c=Math.max(e,d);c=Math.min(c,this.options.maxHeight);this.editor.attr("scrolling",c<this.options.maxHeight?"no":"auto");f.css("overflow",c<this.options.maxHeight?"hidden":"");this.editor.get(0).height=c;return this},init:function(h,f){var e=this;this.editor=h;this.options=this.extendOptions(f);if(false!==this.options.loadCss){for(var g in this.options.loadCss){this.loadCss(this.options.loadCss[g])}}if(a.browser.msie&&parseInt(a.browser.version,10)<8){this.options.autoGrow=false}a.data(h,"wysiwyg",this);var k=h.width||h.clientWidth||0;var j=h.height||h.clientHeight||0;if(h.nodeName.toLowerCase()=="textarea"){this.original=h;if(k===0&&h.cols){k=(h.cols*8)+21;h.cols=1}if(j===0&&h.rows){j=(h.rows*16)+16;h.rows=1}this.editor=a(location.protocol=="https:"?'<iframe src="javascript:false;"></iframe>':"<iframe></iframe>").attr("frameborder","0");if(this.options.iFrameClass){this.editor.addClass(this.options.iFrameClass)}else{this.editor.css({minHeight:(j-6).toString()+"px",width:(k>50)?(k-8).toString()+"px":""});if(a.browser.msie&&parseInt(a.browser.version,10)<7){this.editor.css("height",j.toString()+"px")}}this.editor.attr("tabindex",a(h).attr("tabindex"))}var c=this.panel=a('<ul role="menu" class="panel"></ul>');this.appendControls();this.element=a("<div/>").addClass("wysiwyg").append(c).append(a("<div><!-- --></div>").css({clear:"both"})).append(this.editor);if(!this.options.iFrameClass){this.element.css({width:(k>0)?k.toString()+"px":"100%"})}a(h).hide().before(this.element);this.viewHTML=false;this.initialContent=a(h).val();this.initFrame();this.autoSaveFunction=function(){e.saveContent()};this.resetFunction=function(){e.setContent(e.initialContent);e.saveContent()};if(this.options.resizeOptions&&a.fn.resizable){this.element.resizable(a.extend(true,{alsoResize:this.editor},this.options.resizeOptions))}var d=a(h).closest("form");if(this.options.autoSave){d.submit(e.autoSaveFunction)}d.bind("reset.wysiwyg",e.resetFunction)},initFrame:function(){var c=this;var f="";if(this.options.css&&this.options.css.constructor==String){f='<link rel="stylesheet" type="text/css" media="screen" href="'+this.options.css+'"/>'}this.editorDoc=this.innerDocument();this.editorDoc_designMode=false;this.designMode();this.editorDoc.open();this.editorDoc.write(this.options.html.replace(/INITIAL_CONTENT/,function(){return c.initialContent}).replace(/STYLE_SHEET/,function(){return f}));this.editorDoc.close();if(a.browser.msie){this.timers.initFrame_IeBorder=setTimeout(function(){a(c.editorDoc.body).css("border","none")},0)}a(this.editorDoc).click(function(h){c.checkTargets(h.target?h.target:h.srcElement)});a(this.original).focus(function(){if(a(this).filter(":visible")){return}c.focus()});this.emptyContentRegex=/^<([\w]+)[^>]*>(<br\/?>)?<\/\1>/;a(this.editorDoc).keydown(function(j){if(j.keyCode==8){var h=c.getContent();if(c.emptyContentRegex.test(h)){j.stopPropagation();return false}}return true});if(!a.browser.msie){a(this.editorDoc).keydown(function(h){if(h.ctrlKey||h.metaKey){switch(h.keyCode){case 66:this.execCommand("Bold",false,false);return false;case 73:this.execCommand("Italic",false,false);return false;case 85:this.execCommand("Underline",false,false);return false}}return true})}else{if(this.options.brIE){a(this.editorDoc).keydown(function(j){if(j.keyCode==13){var h=c.getRange();h.pasteHTML("<br/>");h.collapse(false);h.select();return false}return true})}}if(this.options.autoSave){var e=function(){c.saveContent()};a(this.editorDoc).keydown(e).keyup(e).mousedown(e).bind(a.support.noCloneEvent?"input.wysiwyg":"paste.wysiwyg",e)}if(this.options.autoGrow){this.initialHeight=a(this.editorDoc).height();a(this.editorDoc).find("body").css("border","1px solid white");var g=function(){c.grow()};a(this.editorDoc).keyup(g);this.grow()}if(this.options.css){this.timers.initFrame_Css=setTimeout(function(){if(c.options.css.constructor==String){}else{a(c.editorDoc).find("body").css(c.options.css)}},0)}if(this.initialContent.length===0){this.setContent(this.options.initialContent)}a.each(this.options.events,function(h,j){a(c.editorDoc).bind(h+".wysiwyg",j)});a(c.editor).blur(function(){c.rangeSaver=c.getInternalRange()});a(this.editorDoc.body).addClass("wysiwyg");if(this.options.events&&this.options.events.save){var d=this.options.events.save;a(c.editorDoc).bind("keyup.wysiwyg",d);a(c.editorDoc).bind("change.wysiwyg",d);if(a.support.noCloneEvent){a(c.editorDoc).bind("input.wysiwyg",d)}else{a(c.editorDoc).bind("paste.wysiwyg",d);a(c.editorDoc).bind("cut.wysiwyg",d)}}},innerDocument:function(){var c=this.editor.get(0);if(c.nodeName.toLowerCase()=="iframe"){if(c.contentWindow){return c.contentWindow.document}else{return c}}return c},insertHtml:function(c){if(!c||c.length===0){return this}if(a.browser.msie){this.focus();this.editorDoc.execCommand("insertImage",false,"#jwysiwyg#");var d=this.getElementByAttributeValue("img","src","#jwysiwyg#");if(d){a(d).replaceWith(c)}}else{this.editorDoc.execCommand("insertHTML",false,c)}return this},insertTable:function(h,c,g){if(isNaN(c)||isNaN(h)||c===null||h===null){return}h=parseInt(h,10);c=parseInt(c,10);if(g===null){g="&nbsp;"}g="<td>"+g+"</td>";var f=['<table border="1" style="width: 100%;"><tbody>'];for(var e=c;e>0;e--){f.push("<tr>");for(var d=h;d>0;d--){f.push(g)}f.push("</tr>")}f.push("</tbody></table>");return this.insertHtml(f.join(""))},loadCss:function(e,d){d=d||{basePath:this.findPath(),cssPath:"css/"};var g=a("link[rel=stylesheet]");var f=d.basePath+d.cssPath+e;for(i=0;i<g.length;i++){if(f==g[i].href){return true}}var c=a("<link/>");c.attr({href:f,media:"all",rel:"stylesheet",type:"text/css"});a("head").append(c);return true},parseControls:function(){if(this.options.parseControls){return this.options.parseControls.call(this)}return this.options.controls},removeFormat:function(){if(a.browser.msie){this.focus()}this.editorDoc.execCommand("removeFormat",false,null);this.editorDoc.execCommand("unlink",false,null);return this},removeHoverClass:function(){a(this).removeClass("wysiwyg-button-hover")},saveContent:function(){if(this.original){var c=this.getContent();if(this.options.rmUnwantedBr){c=(c.substr(-4)=="<br/>")?c.substr(0,c.length-4):c}a(this.original).val(c);if(this.options.events&&this.options.events.save){this.options.events.save.call(this)}}return this},setContent:function(c){a(this.innerDocument()).find("body").html(c);return this},triggerCallback:function(c){a(window).trigger("wysiwyg-trigger-"+c,[this.getInternalRange(),this,this.getInternalSelection()]);a(".custom-command-"+c,this.panel).blur();this.focusEditor()},withoutCss:function(){if(a.browser.mozilla){try{this.editorDoc.execCommand("styleWithCSS",false,false)}catch(d){try{this.editorDoc.execCommand("useCSS",false,true)}catch(c){}}}return this}};a.wysiwyg={addControl:function(c,d){var e={};e[c]={visible:true,custom:true,options:d};self=this.data("wysiwyg");self.panel=a('<ul role="menu" class="panel"></ul>');self.controls=a.extend(true,self.controls,self.controls,e);self.options.controls=self.controls;self.appendControls()},clear:function(){var c=this.data("wysiwyg");c.setContent("");c.saveContent();return this},createLink:function(e){var c=this.data("wysiwyg");if(!e||e.length===0){return this}var d=c.documentSelection.call(a(c.editor));if(d&&d.length>0){if(a.browser.msie){c.focus()}c.editorDoc.execCommand("unlink",false,null);c.editorDoc.execCommand("createLink",false,e)}else{if(c.options.messages.nonSelection){alert(c.options.messages.nonSelection)}}return this},destroy:function(){var c=this.data("wysiwyg");if("undefined"===typeof c){return this}c.destroy();return this},document:function(){var c=this.data("wysiwyg");return a(c.editorDoc)},getContent:function(){var c=this.data("wysiwyg");return c.getContent()},init:function(c){return this.each(function(){$this=a(this);if($this.data("wysiwyg")){return this}if(false){if(arguments.length>0&&arguments[0].constructor==String){var e=arguments[0].toString();var g=[];if(e=="enabled"){return this.data("wysiwyg")!==null}for(var d=1;d<arguments.length;d++){g[d-1]=arguments[d]}var f=null;this.filter("textarea").each(function(){a.data(this,"wysiwyg").designMode();f=b[e].apply(this,g)});return f}}b.init(this,c)})},insertHtml:function(c){var d=this.data("wysiwyg");d.insertHtml(c);return this},insertImage:function(f,e){var d=this.data("wysiwyg");if(!f||f.length===0){return this}if(a.browser.msie){d.focus()}if(e){d.editorDoc.execCommand("insertImage",false,"#jwysiwyg#");var c=d.getElementByAttributeValue("img","src","#jwysiwyg#");if(c){c.src=f;for(var g in e){c.setAttribute(g,e[g])}}}else{d.editorDoc.execCommand("insertImage",false,f)}return this},insertTable:function(f,d,e){var c=this.data("wysiwyg");c.insertTable(f,d,e);return this},removeFormat:function(){var c=this.data("wysiwyg");c.removeFormat();return this},save:function(){var c=this.data("wysiwyg");c.saveContent();return this},setContent:function(c){var d=this.data("wysiwyg");d.setContent(c);d.saveContent();return this}};a.fn.wysiwyg=function(d){if("undefined"!==typeof a.wysiwyg[d]){return a.wysiwyg[d].apply(this,Array.prototype.slice.call(arguments,1))}else{if("object"===typeof d||!d){return a.wysiwyg.init.apply(this,arguments)}else{try{a.error("Method "+d+" does not exist on jQuery.wysiwyg")}catch(c){console.error(error)}}}}})(jQuery);$(document).ready(function(){$("#orgtext").live("keyup click ready",function(){var c=$(this).val();var a=c.length*100;var d=((a/255));var b=255-c.length;if(c.length<=255){$("#count").html(b);$("#bar").animate({width:d+"%"},1)}else{$(this).val($(this).val().substr(0,255))}return false});$("#orgtext").trigger("click");$("#longorgtext").wysiwyg({css:"/stylesheets/jquery_css/wysiwyg.css",loadCss:true,autoSave:true,initialContent:""})});